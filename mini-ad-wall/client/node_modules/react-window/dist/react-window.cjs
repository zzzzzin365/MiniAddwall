"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const X=require("react/jsx-runtime"),o=require("react");function ce(e){let t=e;for(;t;){if(t.dir)return t.dir==="rtl";t=t.parentElement}return!1}function ae(e,t){const[s,r]=o.useState(t==="rtl");return o.useLayoutEffect(()=>{e&&(t||r(ce(e)))},[t,e]),s}const F=typeof window<"u"?o.useLayoutEffect:o.useEffect;function P(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function ue({box:e,defaultHeight:t,defaultWidth:s,disabled:r,element:n,mode:i,style:l}){const{styleHeight:f,styleWidth:c}=o.useMemo(()=>({styleHeight:P(l?.height),styleWidth:P(l?.width)}),[l?.height,l?.width]),[a,d]=o.useState({height:t,width:s}),u=r||i==="only-height"&&f!==void 0||i==="only-width"&&c!==void 0||f!==void 0&&c!==void 0;return F(()=>{if(n===null||u)return;const h=new ResizeObserver(m=>{for(const y of m){const{contentRect:I,target:x}=y;n===x&&d(w=>w.height===I.height&&w.width===I.width?w:{height:I.height,width:I.width})}});return h.observe(n,{box:e}),()=>{h?.unobserve(n)}},[e,u,n,f,c]),o.useMemo(()=>({height:f??a.height,width:c??a.width}),[a,f,c])}function te(e){const t=o.useRef(()=>{throw new Error("Cannot call during render.")});return F(()=>{t.current=e},[e]),o.useCallback(s=>t.current?.(s),[t])}let G=null;function fe(e=!1){if(G===null||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";const r=document.createElement("div"),n=r.style;return n.width="100px",n.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?G="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?G="negative":G="positive-ascending"),document.body.removeChild(t),G}return G}function N({containerElement:e,direction:t,isRtl:s,scrollOffset:r}){if(t==="horizontal"&&s)switch(fe()){case"negative":return-r;case"positive-descending":{if(e){const{clientWidth:n,scrollLeft:i,scrollWidth:l}=e;return l-n-i}break}}return r}function $(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function q(e,t){if(e===t)return!0;if(!!e!=!!t||($(e!==void 0),$(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const s in e)if(!Object.is(t[s],e[s]))return!1;return!0}function se({cachedBounds:e,itemCount:t,itemSize:s}){if(t===0)return 0;if(typeof s=="number")return t*s;{const r=e.get(e.size===0?0:e.size-1);$(r!==void 0,"Unexpected bounds cache miss");const n=(r.scrollOffset+r.size)/e.size;return t*n}}function de({align:e,cachedBounds:t,index:s,itemCount:r,itemSize:n,containerScrollOffset:i,containerSize:l}){if(s<0||s>=r)throw RangeError(`Invalid index specified: ${s}`,{cause:`Index ${s} is not within the range of 0 - ${r-1}`});const f=se({cachedBounds:t,itemCount:r,itemSize:n}),c=t.get(s),a=Math.max(0,Math.min(f-l,c.scrollOffset)),d=Math.max(0,c.scrollOffset-l+c.size);switch(e==="smart"&&(i>=d&&i<=a?e="auto":e="center"),e){case"start":return a;case"end":return d;case"center":return c.scrollOffset<=l/2?0:c.scrollOffset+c.size/2>=f-l/2?f-l:c.scrollOffset+c.size/2-l/2;case"auto":default:return i>=d&&i<=a?i:i<d?d:a}}function ee({cachedBounds:e,containerScrollOffset:t,containerSize:s,itemCount:r,overscanCount:n}){const i=r-1;let l=0,f=-1,c=0,a=-1,d=0;for(;d<i;){const u=e.get(d);if(u.scrollOffset+u.size>t)break;d++}for(l=d,c=Math.max(0,l-n);d<i;){const u=e.get(d);if(u.scrollOffset+u.size>=t+s)break;d++}return f=Math.min(i,d),a=Math.min(r-1,f+n),l<0&&(l=0,f=-1,c=0,a=-1),{startIndexVisible:l,stopIndexVisible:f,startIndexOverscan:c,stopIndexOverscan:a}}function he({itemCount:e,itemProps:t,itemSize:s}){const r=new Map;return{get(n){for($(n<e,`Invalid index ${n}`);r.size-1<n;){const l=r.size;let f;switch(typeof s){case"function":{f=s(l,t);break}case"number":{f=s;break}}if(l===0)r.set(l,{size:f,scrollOffset:0});else{const c=r.get(l-1);$(c!==void 0,`Unexpected bounds cache miss for index ${n}`),r.set(l,{scrollOffset:c.scrollOffset+c.size,size:f})}}const i=r.get(n);return $(i!==void 0,`Unexpected bounds cache miss for index ${n}`),i},set(n,i){r.set(n,i)},get size(){return r.size}}}function ge({itemCount:e,itemProps:t,itemSize:s}){return o.useMemo(()=>he({itemCount:e,itemProps:t,itemSize:s}),[e,t,s])}function pe({containerSize:e,itemSize:t}){let s;switch(typeof t){case"string":{$(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),$(e!==void 0,"Container size must be defined if a percentage item size is specified"),s=e*parseInt(t)/100;break}default:{s=t;break}}return s}function J({containerElement:e,containerStyle:t,defaultContainerSize:s=0,direction:r,isRtl:n=!1,itemCount:i,itemProps:l,itemSize:f,onResize:c,overscanCount:a}){const[d,u]=o.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:h,startIndexOverscan:m,stopIndexVisible:y,stopIndexOverscan:I}={startIndexVisible:Math.min(i-1,d.startIndexVisible),startIndexOverscan:Math.min(i-1,d.startIndexOverscan),stopIndexVisible:Math.min(i-1,d.stopIndexVisible),stopIndexOverscan:Math.min(i-1,d.stopIndexOverscan)},{height:x=s,width:w=s}=ue({defaultHeight:r==="vertical"?s:void 0,defaultWidth:r==="horizontal"?s:void 0,element:e,mode:r==="vertical"?"only-height":"only-width",style:t}),S=o.useRef({height:0,width:0}),k=r==="vertical"?x:w,g=pe({containerSize:k,itemSize:f});o.useLayoutEffect(()=>{if(typeof c=="function"){const p=S.current;(p.height!==x||p.width!==w)&&(c({height:x,width:w},{...p}),p.height=x,p.width=w)}},[x,c,w]);const z=ge({itemCount:i,itemProps:l,itemSize:g}),V=o.useCallback(p=>z.get(p),[z]),T=o.useCallback(()=>se({cachedBounds:z,itemCount:i,itemSize:g}),[z,i,g]),H=o.useCallback(p=>{const E=N({containerElement:e,direction:r,isRtl:n,scrollOffset:p});return ee({cachedBounds:z,containerScrollOffset:E,containerSize:k,itemCount:i,overscanCount:a})},[z,e,k,r,n,i,a]);F(()=>{const p=(r==="vertical"?e?.scrollTop:e?.scrollLeft)??0;u(H(p))},[e,r,H]),F(()=>{if(!e)return;const p=()=>{u(E=>{const{scrollLeft:M,scrollTop:v}=e,b=N({containerElement:e,direction:r,isRtl:n,scrollOffset:r==="vertical"?v:M}),L=ee({cachedBounds:z,containerScrollOffset:b,containerSize:k,itemCount:i,overscanCount:a});return q(L,E)?E:L})};return e.addEventListener("scroll",p),()=>{e.removeEventListener("scroll",p)}},[z,e,k,r,i,a]);const O=te(({align:p="auto",containerScrollOffset:E,index:M})=>{let v=de({align:p,cachedBounds:z,containerScrollOffset:E,containerSize:k,index:M,itemCount:i,itemSize:g});if(e){if(v=N({containerElement:e,direction:r,isRtl:n,scrollOffset:v}),typeof e.scrollTo!="function"){const b=H(v);q(d,b)||u(b)}return v}});return{getCellBounds:V,getEstimatedSize:T,scrollToIndex:O,startIndexOverscan:m,startIndexVisible:h,stopIndexOverscan:I,stopIndexVisible:y}}function re(e){return o.useMemo(()=>e,Object.values(e))}function ne(e,t){const{ariaAttributes:s,style:r,...n}=e,{ariaAttributes:i,style:l,...f}=t;return q(s,i)&&q(r,l)&&q(n,f)}function xe({cellComponent:e,cellProps:t,children:s,className:r,columnCount:n,columnWidth:i,defaultHeight:l=0,defaultWidth:f=0,dir:c,gridRef:a,onCellsRendered:d,onResize:u,overscanCount:h=3,rowCount:m,rowHeight:y,style:I,tagName:x="div",...w}){const S=re(t),k=o.useMemo(()=>o.memo(e,ne),[e]),[g,z]=o.useState(null),V=ae(g,c),{getCellBounds:T,getEstimatedSize:H,startIndexOverscan:O,startIndexVisible:p,scrollToIndex:E,stopIndexOverscan:M,stopIndexVisible:v}=J({containerElement:g,containerStyle:I,defaultContainerSize:f,direction:"horizontal",isRtl:V,itemCount:n,itemProps:S,itemSize:i,onResize:u,overscanCount:h}),{getCellBounds:b,getEstimatedSize:L,startIndexOverscan:A,startIndexVisible:Q,scrollToIndex:_,stopIndexOverscan:C,stopIndexVisible:Z}=J({containerElement:g,containerStyle:I,defaultContainerSize:l,direction:"vertical",itemCount:m,itemProps:S,itemSize:y,onResize:u,overscanCount:h});o.useImperativeHandle(a,()=>({get element(){return g},scrollToCell({behavior:j="auto",columnAlign:R="auto",columnIndex:W,rowAlign:B="auto",rowIndex:D}){const U=E({align:R,containerScrollOffset:g?.scrollLeft??0,index:W}),le=_({align:B,containerScrollOffset:g?.scrollTop??0,index:D});typeof g?.scrollTo=="function"&&g.scrollTo({behavior:j,left:U,top:le})},scrollToColumn({align:j="auto",behavior:R="auto",index:W}){const B=E({align:j,containerScrollOffset:g?.scrollLeft??0,index:W});typeof g?.scrollTo=="function"&&g.scrollTo({behavior:R,left:B})},scrollToRow({align:j="auto",behavior:R="auto",index:W}){const B=_({align:j,containerScrollOffset:g?.scrollTop??0,index:W});typeof g?.scrollTo=="function"&&g.scrollTo({behavior:R,top:B})}}),[g,E,_]),o.useEffect(()=>{O>=0&&M>=0&&A>=0&&C>=0&&d&&d({columnStartIndex:p,columnStopIndex:v,rowStartIndex:Q,rowStopIndex:Z},{columnStartIndex:O,columnStopIndex:M,rowStartIndex:A,rowStopIndex:C})},[d,O,p,M,v,A,Q,C,Z]);const oe=o.useMemo(()=>{const j=[];if(n>0&&m>0)for(let R=A;R<=C;R++){const W=b(R),B=[];for(let D=O;D<=M;D++){const U=T(D);B.push(o.createElement(k,{...S,ariaAttributes:{"aria-colindex":D+1,role:"gridcell"},columnIndex:D,key:D,rowIndex:R,style:{position:"absolute",left:V?void 0:0,right:V?0:void 0,transform:`translate(${V?-U.scrollOffset:U.scrollOffset}px, ${W.scrollOffset}px)`,height:W.size,width:U.size}}))}j.push(X.jsx("div",{role:"row","aria-rowindex":R+1,children:B},R))}return j},[k,S,n,O,M,T,b,V,m,A,C]),ie=X.jsx("div",{"aria-hidden":!0,style:{height:L(),width:H(),zIndex:-1}});return o.createElement(x,{"aria-colcount":n,"aria-rowcount":m,role:"grid",...w,className:r,dir:c,ref:z,style:{position:"relative",width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",flexGrow:1,overflow:"auto",...I}},oe,s,ie)}const be=o.useState,ve=o.useRef;function me(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const K="data-react-window-index";function Ie({children:e,className:t,defaultHeight:s=0,listRef:r,onResize:n,onRowsRendered:i,overscanCount:l=3,rowComponent:f,rowCount:c,rowHeight:a,rowProps:d,tagName:u="div",style:h,...m}){const y=re(d),I=o.useMemo(()=>o.memo(f,ne),[f]),[x,w]=o.useState(null),S=me(a),k=o.useMemo(()=>S?v=>a.getRowHeight(v)??a.getAverageRowHeight():a,[S,a]),{getCellBounds:g,getEstimatedSize:z,scrollToIndex:V,startIndexOverscan:T,startIndexVisible:H,stopIndexOverscan:O,stopIndexVisible:p}=J({containerElement:x,containerStyle:h,defaultContainerSize:s,direction:"vertical",itemCount:c,itemProps:y,itemSize:k,onResize:n,overscanCount:l});o.useImperativeHandle(r,()=>({get element(){return x},scrollToRow({align:v="auto",behavior:b="auto",index:L}){const A=V({align:v,containerScrollOffset:x?.scrollTop??0,index:L});typeof x?.scrollTo=="function"&&x.scrollTo({behavior:b,top:A})}}),[x,V]),F(()=>{if(!x)return;const v=Array.from(x.children).filter((b,L)=>{if(b.hasAttribute("aria-hidden"))return!1;const A=`${T+L}`;return b.setAttribute(K,A),!0});if(S)return a.observeRowElements(v)},[x,S,a,T,O]),o.useEffect(()=>{T>=0&&O>=0&&i&&i({startIndex:H,stopIndex:p},{startIndex:T,stopIndex:O})},[i,T,H,O,p]);const E=o.useMemo(()=>{const v=[];if(c>0)for(let b=T;b<=O;b++){const L=g(b);v.push(o.createElement(I,{...y,ariaAttributes:{"aria-posinset":b+1,"aria-setsize":c,role:"listitem"},key:b,index:b,style:{position:"absolute",left:0,transform:`translateY(${L.scrollOffset}px)`,height:S?void 0:L.size,width:"100%"}}))}return v},[I,g,S,c,y,T,O]),M=X.jsx("div",{"aria-hidden":!0,style:{height:z(),width:"100%",zIndex:-1}});return o.createElement(u,{role:"list",...m,className:t,ref:w,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...h}},E,e,M)}function we({defaultRowHeight:e,key:t}){const[s,r]=o.useState({key:t,map:new Map});s.key!==t&&r({key:t,map:new Map});const{map:n}=s,i=o.useCallback(()=>{let u=0;return n.forEach(h=>{u+=h}),u===0?e:u/n.size},[e,n]),l=o.useCallback(u=>{const h=n.get(u);return h!==void 0?h:(n.set(u,e),e)},[e,n]),f=o.useCallback((u,h)=>{r(m=>{if(m.map.get(u)===h)return m;const y=new Map(m.map);return y.set(u,h),{...m,map:y}})},[]),c=te(u=>{u.length!==0&&u.forEach(h=>{const{borderBoxSize:m,target:y}=h,I=y.getAttribute(K);$(I!==null,`Invalid ${K} attribute value`);const x=parseInt(I),{blockSize:w}=m[0];w&&f(x,w)})}),[a]=o.useState(()=>new ResizeObserver(c));o.useEffect(()=>()=>{a.disconnect()},[a]);const d=o.useCallback(u=>(u.forEach(h=>a.observe(h)),()=>{u.forEach(h=>a.unobserve(h))}),[a]);return o.useMemo(()=>({getAverageRowHeight:i,getRowHeight:l,setRowHeight:f,observeRowElements:d}),[i,l,f,d])}const ye=o.useState,Oe=o.useRef;let Y=-1;function Se(e=!1){if(Y===-1||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(t),Y=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Y}exports.Grid=xe;exports.List=Ie;exports.getScrollbarSize=Se;exports.useDynamicRowHeight=we;exports.useGridCallbackRef=be;exports.useGridRef=ve;exports.useListCallbackRef=ye;exports.useListRef=Oe;
//# sourceMappingURL=react-window.cjs.map
